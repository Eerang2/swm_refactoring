<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<th:block th:fragment="side">
    <!-- Sidebar Start -->
    <div class="sidebar pe-4 pb-3">
        <nav class="navbar bg-light navbar-light">
            <a th:href="@{/seller-main.do}" class="navbar-brand mx-4 mb-3">
                <h3 class="text-primary"><i class="fa fa-hashtag me-2"></i>Stay With Me</h3>
            </a>
            <div class="navbar-nav w-100">
                <a th:href="@{/seller-main.do}" class="nav-item nav-link"
                   th:classappend="${currentUrl == '/seller-main.do'} ? ' active' : ''">
                    <i class="fa fa-tachometer-alt me-2"></i>대시보드
                </a>
                <div class="nav-item dropdown show">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-laptop me-2"></i>숙소관리</a>
                    <div class="dropdown-menu show bg-transparent border-0">
                        <a th:href="@{/admin/seller/enroll}" class="dropdown-item"
                           th:classappend="${currentUrl == '/admin/seller/enroll'} ? ' active' : ''">숙소등록</a>

                        <a id="update-link" href="#" class="dropdown-item">숙소수정</a>
                    </div>
                </div>
                <div class="nav-item dropdown show">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-laptop me-2"></i>방관리</a>
                    <div class="dropdown-menu show bg-transparent border-0">
                        <a th:href="@{/room/create}" class="dropdown-item"
                           th:classappend="${currentUrl == '/room/create'} ? ' active' : ''">방등록</a>
                        <a th:href="@{/room/update}" class="dropdown-item"
                           th:classappend="${currentUrl == '/room/update'} ? ' active' : ''">방수정</a>
                    </div>
                </div>
                <div class="nav-item dropdown show">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-book me-2"></i>예약관리</a>
                    <div class="dropdown-menu show bg-transparent border-0">
                        <a th:href="@{/reservation.do}" class="dropdown-item"
                           th:classappend="${currentUrl == '/reservation.do'} ? ' active' : ''">예약리스트</a>
                        <a th:href="@{/reservation-daily.do}" class="dropdown-item"
                           th:classappend="${currentUrl == '/reservation-daily.do'} ? ' active' : ''">일별 현황보기</a>
                        <a th:href="@{/reservation-monthly.do}" class="dropdown-item"
                           th:classappend="${currentUrl == '/reservation-monthly.do'} ? ' active' : ''">월별 현황보기</a>
                    </div>
                </div>
                <div class="nav-item dropdown show">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-cog me-2"></i>판매 환경설정</a>
                    <div class="dropdown-menu show bg-transparent border-0">
                        <a th:href="@{/basic-rate-list.do}" class="dropdown-item"
                           th:classappend="${currentUrl == '/basic-rate-list.do'} ? ' active' : ''">기본요금 수정</a>
                        <a th:href="@{/season-period.do}" class="dropdown-item"
                           th:classappend="${currentUrl == '/season-period.do'} ? ' active' : ''">성수기/기간 관리</a>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</th:block>
<script>
    $(document).ready(function () {
        // AJAX 요청을 통해 accommodationId 가져오기
        $.ajax({
            url: '/api/get/id', // API 엔드포인트
            method: 'GET',
            dataType: 'json',
            success: function (data) {
                // 성공적으로 데이터 수신
                const accommodationId = data.accommodationId; // API가 반환한 ID
                if (accommodationId) {
                    $("#update-link").attr("href", `/accommodation/update/${accommodationId}`);
                }
            },
            error: function (xhr, status, error) {
                console.error('Error fetching accommodation ID:', error);
            }
        });
    });
</script>

</body>
</html>